"use strict";function xmlToJson(e){return new Promise(function(t,n){return"string"!=typeof e?n({message:"Input must be a string"}):parseString(e,function(e,r){return e?n(e):t(r)})})}function extractChannel(e){return Promise.resolve(e.rss.channel[0])}function extractHeaders(e){var t=e.title,n=e.link,r=e.description,a=e.language,i=e.category,o=e.lastBuildDate,s=firstElements({title:t,link:n,description:r,language:a,category:i,date:o});return Promise.resolve(s)}function extractRawItems(e){return new Promise(function(t){var n=e.item;return n=n.map(function(e){var t=e.title,n=e.description,r=e.author,a=e.pubdate,i=e.link,o=e.guid,s=e["atom:link"],c=e["media:content"],u=e["media:description"],m=e["media:credit"],l=e["dc:creator"],d=e.pubDate,g=e.category,p=e["media:group"],f=e["feedburner:origLink"],x=e["media:thumbnail"],h=e["wfw:commentRss"],b=e.comments,C=e["slash:comments"],v=e["content:encoded"],I=e["post-id"];return firstElements({title:t,description:n,author:r,pubdate:a,link:i,guid:o,atomLink:s,mediaContent:c,mediaDescription:u,mediaCredit:m,dcCreator:l,pubDate:d,category:g,mediaGroup:p,feedburnerOrigLink:f,mediaThumbnail:x,wfwCommentRss:h,comments:b,slashComments:C,contentEncoded:v,postId:I})}),t(n)})}function extractCleanItems(e){return new Promise(function(t){var n=e.map(function(e){return extractCleanItem(e)});return t(n)})}function extractCleanItem(e){var t={title:["title"],link:["link","guid","atomLink"],content:["contentEncoded","description"],contentSnipet:["description"],author:["dcCreator","author"],image:["mediaContent","mediaThumbnail","mediaGroup"],date:["pubDate","pubdate"]},n=["title","link","content","contentSnipet","author","image","date"],r=["image"],a={};return n.forEach(function(n){var r=getStringValue(e,t[n]);r&&(a[n]=r)}),r.forEach(function(n){var r=getImageValue(e,t[n]);r&&(a[n]=r)}),a}function firstElements(e){var t={};return Object.keys(e).forEach(function(n){"object"==typeof e[n]&&e[n].length&&(t[n]=e[n][0])}),t}function getStringValue(e,t){for(var n,r=0,a=t;r<a.length;r++){var i=a[r];if(n=e[i])break}return n}function getImageValue(e,t){for(var n,r=0,a=t;r<a.length;r++){var i=a[r];if(n=e[i]){n.$||(n=(n["media:content"]||[])[0]||{}),n=n.$;break}}return n}Object.defineProperty(exports,"__esModule",{value:!0});var xml2js=require("xml2js"),parseString=xml2js.parseString;exports.xmlToJson=xmlToJson,exports.extractChannel=extractChannel,exports.extractHeaders=extractHeaders,exports.extractRawItems=extractRawItems,exports.extractCleanItems=extractCleanItems,exports.extractCleanItem=extractCleanItem,exports.firstElements=firstElements,exports.getStringValue=getStringValue,exports.getImageValue=getImageValue;